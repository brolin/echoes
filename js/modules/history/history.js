define(["jquery","underscore","backbone","./history-view","./history-playlist"],function(t,e,i,o,s){var n=i.View.extend({tagName:"ul",className:"clearfix unstyled ux-maker youtube-items-container",view:{type:o,collection:s,events:{"play-media":"playMedia"}},initialize:function(){this.listenTo(i,"gapiload:youtube",function(){this.model.youtube.history.fetch()}),this.listenTo(this.model.youtube.profile,"loaded",function(){this.model.youtube.history.fetch()}),this.listenTo(this.model.youtube.history,"change:items",this.updateCollection),this.$el.addClass("transition-out"),this.model.youtube.history.connect(),this.model.youtube.history.hasId()||this.model.youtube.profile.connect(),this.model.youtube.history.get("items")},playMedia:function(t){this.model.playMedia({type:"video",mediaId:t.id}),this.updateState(t,!0)},handleLoadMore:function(){},updateCollection:function(t,e){e&&(this.$el.hide(),this.collection.addItems(e),i.trigger("app:loader-end"),this.$el.show().addClass("transition-in").removeClass("transition-out"))},reset:function(){this.collection.reset()},updateState:function(t,e){e&&this.collection.savePlayed(t)},favoriteMedia:function(t){var e=this.model.youtube.profile.getFavoritesId();this.model.youtube.playlists.insert(e,t.id)}});return n});