define(["underscore","backbone","models/youtube_user_playlist_item","models/youtube/YoutubePlaylistItemsService","models/youtube/PlaylistsService"],function(e,t,n,r,i){var s=t.Collection.extend({model:r,url:function(){return"http://gdata.youtube.com/feeds/api/users/"+this.username+"/playlists?v=2&alt=jsonc&max-results=50&start-index="+this.index},initialize:function(){this.tempItems=[]},insert:function(e,t){var n=this.get(e);return n&&n.insert(t),n},list:function(e){var t=new i;t.get("v_3").list.id=e,t.on("sync",function(t){var n=t.get("v_3_response").result.items[0].contentDetails.itemCount;this.get(e).set("size",n)},this),t.fetch()},createPlaylist:function(e,t){var n=new i;return n.on("sync",function(e){this.resetParams(),this.fetch(),n.off()},this),n.insert(e,t)},resetParams:function(){this.index=1,this.tempItems.length=0},getInfo:function(){this.hasChanged("id")&&this.set({startIndex:1},{silent:!0}),this.fetch()},index:1,fetchNext:function(e){var t=50,n=this.index,r=e.data.totalItems,i=t+n,s=r-i>=0;return s&&(this.index=i),s},parse:function(e){return e.data.items=this.tempItems.concat(e.data.items),this.tempItems=e.data.items,this.fetchNext(e)&&this.fetch({reset:!0}),e.data.items},comparator:function(e){return e.get("title")}});return s});