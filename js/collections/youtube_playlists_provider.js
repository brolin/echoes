define(["underscore","backbone","models/youtube_user_playlist_item","models/youtube/YoutubePlaylistItemsService","models/youtube/PlaylistsService","models/gapi"],function(t,e,s,i,n,a){{var r=e.Collection.extend({model:i,url:function(){return"http://gdata.youtube.com/feeds/api/users/"+this.username+"/playlists?v=2&alt=jsonc&max-results=50&start-index="+this.index},initialize:function(){this.tempItems=[]},insert:function(t,e){var s=this.get(t);return s&&s.insert(e),s},list:function(t){var e=new n;e.methods.list.id=t,e.on("sync",function(e){var s=e.get("result").items[0].contentDetails.itemCount;this.get(t).set("size",s)},this),e.fetch()},createPlaylist:function(t,e){var s=new n;return s.on("sync",function(){this.resetParams(),this.fetch(),s.off()},this),s.insert(t,e)},resetParams:function(){this.index=1,this.tempItems.length=0},getInfo:function(){this.hasChanged("id")&&this.set({startIndex:1},{silent:!0}),this.fetch()},index:1,fetchNext:function(t){var e=50,s=this.index,i=t.data.totalItems,n=e+s,a=i-n>=0;return a&&(this.index=n),a},parse:function(t){return t.data.items=this.tempItems.concat(t.data.items),this.tempItems=t.data.items,this.fetchNext(t)&&this.fetch({reset:!0}),t.data.items},comparator:function(t){return t.get("title")}});a.extend({})}return r});