define(["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({initialize:function(){this.listenTo(this.model.youtube(),"request",function(){this.isInRequest=!0}),this.listenTo(this.model.youtube(),"sync",function(){this.isInRequest=!1}),this.listenToScroll()},listenToScroll:function(){e(window).scroll(t.bind(this.loadNextForBody,this))},loadNext:function(){if(this.isInRequest)return;var e=this.$el.scrollTop(),t=this.$(".row-fluid").height(),n=this.$el.height(),r=n*.4;e>=t-n-r&&this.model.youtube().fetchNext()},loadNextForBody:function(){if(this.isInRequest)return;var t=this.$(".row-fluid").height(),r=e("body").scrollTop(),i=window.innerHeight,s=i*.4;if(r>=t-i-s){n.trigger("app:load-more",!0);return}}});return r});