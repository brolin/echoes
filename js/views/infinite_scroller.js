define(["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({initialize:function(){this.listenTo(this.model.youtube(),"request",function(){this.isInRequest=!0}),this.listenTo(this.model.youtube(),"sync",function(){this.isInRequest=!1}),this.listenToScroll()},listenToScroll:function(){var n=window.getComputedStyle(document.body),r=n.overflowY==="scroll";r?e(window).scroll(t.bind(this.loadNextForBody,this)):this.$el.scroll(t.bind(this.loadNext,this))},loadNext:function(){if(this.isInRequest)return;var e=this.$el.scrollTop(),t=this.$(".row-fluid").height(),n=this.$el.height(),r=n*.4;e>=t-n-r&&this.model.youtube().fetchNext()},loadNextForBody:function(){if(this.isInRequest)return;var t=this.$(".row-fluid").height(),n=e("body").scrollTop(),r=window.innerHeight,i=r*.4;if(n>=t-r-i){this.model.youtube().fetchNext();return}}});return r});