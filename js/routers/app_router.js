define(["jquery","underscore","backbone"],function(t,e,i){var l=i.Router.extend({routes:{"":"explore",explore:"explore",history:"history",myPlaylists:"myPlaylists","filter/:feedType":"filter","playlist/:playlistId":"showPlaylistInfo","searches/:query":"search","play/video/:mediaId":"playVideoItem","play/playlist/:playlistId/:index":"playPlaylistItem"},initialize:function(t){this.model=t.model,this.model.on("change:currentIndex",this.updatePlaylistUrl,this),this.model.start(),i.history.start()},explore:function(){this.markNav("explore"),this.model.youtube.attributes.data.items=0,this.model.route(this.model.get("filter"))},history:function(){this.markNav("history"),this.model.route("history")},myPlaylists:function(){this.markNav("myPlaylists"),this.model.route("myPlaylists")},search:function(t){this.model.set({query:t},{silent:!0})},filter:function(t){this.model.set("filter",t),this.model.set("layout",t)},showPlaylistInfo:function(t){this.model.youtube.set({showPlaylistId:t}),this.model.route("playlistInfo")},playMedia:function(t,e){this.model.playMedia(e,{type:t})},playVideoItem:function(t){this.model.playMedia({type:"video",mediaId:t})},playPlaylistItem:function(t,e){this.model.playMedia({type:"playlist",mediaId:t,index:e})},updatePlaylistUrl:function(t,i){var l=this.model.get("play")||"";e.isNumber(i)&&""!==l&&this.navigate("play/playlist/"+l+"/"+i,{trigger:!1})},markNav:function(e){t("#library-nav").find("li").removeClass("active").end().find("a[href^='#"+e+"']").parent().addClass("active")}});return l});