define(["jquery","underscore","backbone"],function(e,t,i){var l=i.Router.extend({routes:{"":"explore",explore:"explore",history:"history",myPlaylists:"myPlaylists","access_token=:token&token_type=:tokenType&expires_in=:expires":"connect","filter/:feedType":"filter","playlist/:playlistId":"showPlaylistInfo","searches/:query":"search","play/video/:mediaId":"playVideoItem","play/playlist/:playlistId/:index":"playPlaylistItem"},initialize:function(e){this.model=e.model,this.model.on("change:currentIndex",this.updatePlaylistUrl,this),this.model.start(),i.history.start()},explore:function(){this.markNav("explore"),this.model.youtube.attributes.data.items=0,this.model.route(this.model.get("filter"))},history:function(){this.markNav("history"),this.model.route("history")},myPlaylists:function(){this.markNav("myPlaylists"),this.model.route("myPlaylists")},connect:function(e){this.model.connect(e)},search:function(e){this.model.set({query:e},{silent:!0})},filter:function(e){this.model.set("filter",e),this.model.set("layout",e)},showPlaylistInfo:function(e){this.model.youtube.set({showPlaylistId:e}),this.model.route("playlistInfo")},playMedia:function(e,t){this.model.playMedia(t,{type:e})},playVideoItem:function(e){this.model.playMedia({type:"video",mediaId:e})},playPlaylistItem:function(e,t){this.model.playMedia({type:"playlist",mediaId:e,index:t})},updatePlaylistUrl:function(e,i){var l=this.model.get("play")||"";t.isNumber(i)&&""!==l&&this.navigate("play/playlist/"+l+"/"+i,{trigger:!1})},markNav:function(t){e("#library-nav").find("li").removeClass("active").end().find("a[href^='#"+t+"']").parent().addClass("active")}});return l});