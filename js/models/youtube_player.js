define(["underscore","backbone"],function(t,e){var i=e.Model.extend({defaults:{options:null,mediaId:"",nowPlayingId:"",type:"",isPlaying:!1,index:0,size:{width:300,height:270},fullScreen:!1},initialize:function(){this.set("nowPlayingId",null),this.set("mediaId",null)},setOptions:function(t){"playlist"===t.type&&this.validateIndex(t),this.set(t)},validateIndex:function(e){var i=e.index;t.isNumber(i)||(e.index=i=parseInt(i,10)),e.index=0>i?0:i},getPlaylistId:function(){return this.get("mediaId")},getPlaylistCurrentIndex:function(){return this.get("index")},isCurrentPlaylist:function(){return"playlist"===this.get("type")},toggleFullScreen:function(){this.set("fullScreen",!this.get("fullScreen"))},getSize:function(){return this.get("fullScreen")?this.defaults.size:t(["sidebar"]).getPortviewSize()},getShareUrl:function(){var t=this.attributes.type,e="http://echotu.be/#play/"+t+"/"+this.attributes.mediaId;return"playlist"===t&&(e+="/"+this.index),e},play:function(){this.set({isPlaying:!0})},pause:function(){this.set({isPlaying:!1})}});return i});