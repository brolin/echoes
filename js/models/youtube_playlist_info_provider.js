define(["underscore","backbone"],function(t,e){var s=e.Model.extend({defaults:{id:null,type:"playlists",maxResults:50,startIndex:1},initialize:function(){this.on("change:id",this.getInfo,this),this.on("change:startIndex",this.getInfo,this),this.on("change:items",this.fetchNext,this)},getInfo:function(){this.hasChanged("id")&&(this.set("items",null,{silent:!0}),this.set({startIndex:1},{silent:!0})),this.fetch()},fetchNext:function(){var t=this.get("maxResults"),e=this.get("startIndex"),s=this.get("totalItems"),i=t+e,n=s-i>0;return n?void this.set("startIndex",i):void this.trigger("done",this.get("items"),this)},url:function(){var e=t.isNull(this.get("maxResults"))?!1:this.get("maxResults"),s=this.get("type");return"https://gdata.youtube.com/feeds/api/"+this.get("type")+"/"+this.get("id")+"?v=2&alt=jsonc"+(e?"&max-results="+e:"")+("playlists"===s?"&start-index="+this.get("startIndex"):"")},parse:function(t){return this.get("id")===this.previous("id")&&this.get("items")&&(t.data.items=this.get("items").concat(t.data.items)),t.data}});return s});