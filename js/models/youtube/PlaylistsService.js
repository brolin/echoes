define(["underscore","backbone","../gapi"],function(t,e,i){var s=i.extend({url:function(){return gapi.client.youtube.playlists},scopes:"https://www.googleapis.com/auth/youtube",client:{api:"youtube",version:"v3"},fetchAll:!1,initialize:function(t){t&&t.fetchAll&&(this.fetchAll=t.fetchAll),this._pl_items=[],this.connect()},methods:{insert:{part:"snippet,contentDetails",resource:{snippet:{title:"",description:""}}},list:{part:"snippet,contentDetails",maxResults:50,mine:!0},"delete":{id:""}},defaults:{},insert:function(t,e){return this.methods.insert.resource.snippet={title:t,description:e||""},this.create()},remove:function(t){return this.methods["delete"].id=t,this.delete()},parse:function(t){var e;return this.fetchAll?(this._pl_items=this._pl_items.concat(t.items),e=this.fetchNextToken(t),t.items=this._pl_items,e?"":t):t},fetchNextToken:function(t){var e=t.nextPageToken;return e?(this.methods.list.pageToken=e,this.fetch()):void 0}});return s});