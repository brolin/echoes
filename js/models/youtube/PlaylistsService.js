define(["underscore","backbone","../gapi"],function(t,e,s){var i=s.extend({url:function(){return gapi.client.youtube.playlists},scopes:"https://www.googleapis.com/auth/youtube",client:{api:"youtube",version:"v3"},fetchAll:!1,initialize:function(t){t&&t.fetchAll&&(this.fetchAll=t.fetchAll),this.tempItems=[],this.connect()},methods:{insert:{part:"snippet,status",resource:{snippet:{title:"",description:""},status:{privacyStatus:"public"}}},list:{part:"snippet,contentDetails",maxResults:15,mine:!0}},defaults:{},insert:function(t,e){return this.methods.insert.resource.snippet={title:t,description:e||""},this.create()},parse:function(t){var e;return this.fetchAll?(this.tempItems=this.tempItems.concat(t.items),this.fetchNextToken(t),t.items=this.tempItems,t):(t.items=this.tempItems.concat(t.items),this.tempItems.length=0,e)},fetchNextToken:function(t){{var e=t.nextPageToken;t.pageInfo.totalResults}e&&(this.methods.list.pageToken=e,this.fetch())}});return i});