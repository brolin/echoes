define(["jquery","underscore","backbonesrc"],function(){function i(i){this._sourceRender=i.render||function(){}}var t=this._,n=this.Backbone;if(t&&n&&JSON){i.prototype={render:function(){return this.transition?this.$el.hasClass(this.transition.css)?(this._hide(),this._timer=setTimeout(t.bind(this.handleTransition,this),this.transition.duration)):this.handleTransition():this._sourceRender(),this},handleTransition:function(){this._sourceRender(),clearTimeout(this._timer),this._timer=setTimeout(t.bind(this._show,this),this.transition.duration)},_hide:function(){this.$el.removeClass(this.transition.css)},_show:function(){this.$el.addClass(this.transition.css)}};var s=function(){n.trigger("extend:View",{key:"transition",extension:i,initialize:function(){}})};return{beam:s}}});